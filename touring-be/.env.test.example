# =========================================
# TRAVYY TOURISM - TEST ENVIRONMENT CONFIG
# =========================================
# Copy this file to .env and fill in your values
# Last Updated: November 2025

# =========================================
# SERVER CONFIGURATION
# =========================================
NODE_ENV=test
PORT=4000

# =========================================
# DATABASE
# =========================================
# Use a separate test database!
MONGO_URI=mongodb://localhost:27017/travyy_test
# Or MongoDB Atlas test cluster:
# MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/travyy_test

# =========================================
# JWT AUTHENTICATION
# =========================================
JWT_SECRET=your_jwt_secret_key_here_minimum_32_characters
JWT_ACCESS_EXP=15m
JWT_REFRESH_EXP=30d

# =========================================
# MOMO SANDBOX PAYMENT
# =========================================
# Get sandbox credentials from: https://developers.momo.vn/
MOMO_PARTNER_CODE=MOMO
MOMO_ACCESS_KEY=F8BBA842ECF85
MOMO_SECRET_KEY=K951B6PE1waDMi640xX08PD3vg6EkVlz
MOMO_CREATE_ENDPOINT=https://test-payment.momo.vn/v2/gateway/api/create
MOMO_SANDBOX_MODE=true
MOMO_MAX_AMOUNT=10000000
MOMO_PARTNER_NAME=Travyy
MOMO_STORE_ID=TravyyStore

# Callback URLs for MoMo
MOMO_REDIRECT_URL=http://localhost:5173/payment/success
MOMO_IPN_URL=http://localhost:4000/api/payments/momo/ipn

# =========================================
# PAYPAL SANDBOX
# =========================================
# Get sandbox credentials from: https://developer.paypal.com/
PAYPAL_MODE=sandbox
PAYPAL_CLIENT_ID=your_paypal_sandbox_client_id_here
PAYPAL_SECRET=your_paypal_sandbox_secret_here
# Alternative name for secret (both supported):
# PAYPAL_CLIENT_SECRET=your_paypal_sandbox_secret_here

# =========================================
# GOOGLE OAUTH 2.0
# =========================================
# Get credentials from: https://console.cloud.google.com/
GOOGLE_CLIENT_ID=your_google_client_id_here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_CALLBACK_URL=http://localhost:4000/api/auth/google/callback

# =========================================
# FACEBOOK OAUTH
# =========================================
# Get credentials from: https://developers.facebook.com/
FACEBOOK_APP_ID=your_facebook_app_id_here
FACEBOOK_APP_SECRET=your_facebook_app_secret_here
FACEBOOK_CALLBACK_URL=http://localhost:4000/api/auth/facebook/callback

# =========================================
# EMAIL SERVICE (Optional for tests)
# =========================================
# Use Gmail with App Password or SMTP service
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_app_password_here
EMAIL_SERVICE=gmail
EMAIL_FROM=Travyy Tourism <noreply@travyy.com>

# =========================================
# FRONTEND URLs
# =========================================
CLIENT_URL=http://localhost:5173
FRONTEND_URL=http://localhost:5173

# =========================================
# CLOUDINARY (Optional for tests)
# =========================================
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# =========================================
# SESSION CONFIGURATION
# =========================================
SESSION_SECRET=your_session_secret_here_minimum_32_characters
SESSION_COOKIE_SECURE=false

# =========================================
# TESTING FLAGS
# =========================================
# Skip external API tests if credentials not available
SKIP_EXTERNAL_TESTS=false

# Enable verbose logging in tests
DEBUG=false

# =========================================
# NOTES FOR TESTING
# =========================================
# 1. MoMo Sandbox:
#    - Test wallet limit: 10,000,000 VND per transaction
#    - Use provided sandbox credentials or get your own
#    - IPN webhook must be accessible (use ngrok for local testing)
#
# 2. PayPal Sandbox:
#    - Create sandbox account at developer.paypal.com
#    - Use sandbox credentials, NOT production!
#    - Test with sandbox buyer accounts
#
# 3. Google OAuth:
#    - Enable Google+ API in Cloud Console
#    - Add http://localhost:4000/api/auth/google/callback to authorized redirects
#    - Use test users or make app public for testing
#
# 4. Facebook OAuth:
#    - Add http://localhost:4000/api/auth/facebook/callback to Valid OAuth Redirect URIs
#    - App must be in Development mode for testing
#    - Add test users in App Roles
#
# 5. Database:
#    - ALWAYS use a separate test database!
#    - Tests will create and delete data
#    - Use mongodb://localhost:27017/travyy_test or separate Atlas cluster
#
# 6. Email:
#    - Tests can run without email service
#    - Notification tests will log warnings if not configured
#    - Use Gmail App Password (not regular password)
#
# =========================================

# =========================================
# QUICK START FOR TESTING
# =========================================
# 1. Copy this file to .env:
#    cp .env.test.example .env
#
# 2. Fill in at minimum:
#    - MONGO_URI (test database)
#    - JWT_SECRET
#    - PAYPAL_CLIENT_ID and PAYPAL_SECRET (for PayPal tests)
#
# 3. Optional but recommended:
#    - Google OAuth credentials
#    - Facebook OAuth credentials
#    - MoMo credentials (can use provided sandbox)
#
# 4. Run tests:
#    npm test
#
# 5. Check coverage:
#    npm run test:coverage
#
# =========================================
